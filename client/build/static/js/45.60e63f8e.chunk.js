"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[45],{9348:(e,s,a)=>{a.d(s,{c:()=>g});a(9060);var n=a(496),l=a(12),t=a(3928),c=a(9652),r=a(7640),o=a(8372),i=a(1560),d=a(2496);const m=()=>{const[e,s]=(0,r.k)(),a=(0,i.i6)();return(0,d.jsx)("div",{children:(0,d.jsxs)("form",{className:"search-form d-flex",role:"search",onSubmit:async n=>{n.preventDefault();try{const{data:n}=await o.c.get("/api/v1/product/search/".concat(e.keyword));s({...e,results:n}),a("/search")}catch(l){console.log(l)}},children:[(0,d.jsx)("input",{className:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search",value:e.keyword,onChange:a=>s({...e,keyword:a.target.value})}),(0,d.jsx)("button",{className:"btn btn-outline-success",type:"submit",children:"Search"})]})})};var h=a(6068),u=a(2020),v=a(6952);const x=()=>{var e,s;const[a,n]=(0,t.S)(),[r]=(0,u.G)(),o=(0,h.c)();return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("nav",{className:"navbar navbar-expand-lg bg-body-tertiary fixed-top",children:(0,d.jsxs)("div",{className:"container-fluid",children:[(0,d.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,d.jsx)("span",{className:"navbar-toggler-icon"})}),(0,d.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[(0,d.jsx)(l.cH,{className:"navbar-brand",to:"/",children:"\ud83d\uded2Ecommerce App"}),(0,d.jsxs)("ul",{className:"navbar-nav ms-auto mb-2 mb-lg-0",children:[(0,d.jsx)(m,{}),(0,d.jsx)("li",{className:"nav-item ms-2",children:(0,d.jsx)(l.Af,{className:"nav-link",to:"/",children:"Home"})}),(0,d.jsxs)("li",{className:"nav-item dropdown",children:[(0,d.jsx)(l.cH,{className:"nav-link dropdown-toggle",to:"/categories",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Categories"}),(0,d.jsxs)("ul",{className:"dropdown-menu",children:[(0,d.jsx)("li",{children:(0,d.jsx)(l.cH,{className:"dropdown-item",to:"/categories",children:"All Categories"})}),null===o||void 0===o?void 0:o.map((e=>(0,d.jsx)("li",{children:(0,d.jsx)(l.cH,{className:"dropdown-item",to:"/category/".concat(e.slug),children:e.name})},e._id)))]})]}),a.user?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("li",{className:"nav-item dropdown",children:[(0,d.jsx)(l.Af,{className:"nav-link dropdown-toggle",role:"button","data-bs-toggle":"dropdown",to:"#","aria-expanded":"false",children:null===a||void 0===a||null===(e=a.user)||void 0===e?void 0:e.name}),(0,d.jsxs)("ul",{className:"dropdown-menu",children:[(0,d.jsx)("li",{children:(0,d.jsx)(l.Af,{className:"dropdown-item",to:"/dashboard/".concat(1===(null===a||void 0===a||null===(s=a.user)||void 0===s?void 0:s.role)?"admin":"user"),children:"Dashboard"})}),(0,d.jsx)("li",{children:(0,d.jsx)(l.Af,{onClick:()=>{n({...a,user:null,token:""}),localStorage.removeItem("auth"),c.cp.success("Logout successfully")},className:"dropdown-item",to:"/login",children:"Logout"})})]})]})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(l.Af,{className:"nav-link",to:"/register",children:"Register"})}),(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(l.Af,{className:"nav-link",to:"/login",children:"Login"})})]}),(0,d.jsx)("li",{className:"nav-item mt-2",children:(0,d.jsx)(v.c,{count:null===r||void 0===r?void 0:r.length,showZero:!0,children:(0,d.jsx)(l.Af,{className:"nav-link",to:"/cart",children:"Cart"})})})]})]})]})})})},j=()=>(0,d.jsxs)("div",{className:"footer",children:[(0,d.jsx)("h1",{className:"text-center",children:"All Right Reserved \xa9 KaranM"}),(0,d.jsxs)("p",{className:"text-center mt-3",children:[(0,d.jsx)(l.cH,{to:"/about",children:"About"}),(0,d.jsx)(l.cH,{to:"/contact",children:"Contact"}),(0,d.jsx)(l.cH,{to:"/policy",children:"Private Policy"})]})]}),p=e=>{let{children:s,title:a,description:l,keywords:t,author:r}=e;return(0,d.jsxs)("div",{children:[(0,d.jsxs)(n.S,{children:[(0,d.jsx)("meta",{charSet:"utf-8"}),(0,d.jsx)("meta",{name:"description",content:l}),(0,d.jsx)("meta",{name:"keywords",content:t}),(0,d.jsx)("meta",{name:"author",content:r}),(0,d.jsx)("title",{children:a})]}),(0,d.jsx)(x,{}),(0,d.jsxs)("main",{style:{minHeight:"70vh"},children:[(0,d.jsx)(c.ox,{}),s]}),(0,d.jsx)(j,{})]})};p.defaultProps={title:"Ecommerce app",description:"mern stack project",keywords:"mern,react,node,mongodb,express",author:"karanm_"};const g=p},6068:(e,s,a)=>{a.d(s,{c:()=>t});var n=a(9060),l=a(8372);function t(){const[e,s]=(0,n.useState)([]);return(0,n.useEffect)((()=>{(async()=>{try{const{data:e}=await l.c.get("/api/v1/category/get-category");s(null===e||void 0===e?void 0:e.category)}catch(e){console.log(e)}})()}),[]),e}},7045:(e,s,a)=>{a.r(s),a.d(s,{default:()=>h});var n=a(9060),l=a(9348),t=a(2020),c=a(3928),r=a(1560),o=a(316),i=a(8372),d=a(9652),m=a(2496);const h=()=>{var e,s,a,h;const[u,v]=(0,t.G)(),[x,j]=(0,c.S)(),[p,g]=(0,n.useState)(""),[b,N]=(0,n.useState)(""),[y,k]=(0,n.useState)(!1),f=(0,r.i6)();(0,n.useEffect)((()=>{(async()=>{try{const{data:e}=await i.c.get("/api/v1/product/braintree/token");g(null===e||void 0===e?void 0:e.clientToken)}catch(e){console.log(e)}})()}),[null===x||void 0===x?void 0:x.token]);return(0,m.jsx)(l.c,{children:(0,m.jsxs)("div",{className:"cart-page",children:[(0,m.jsx)("div",{className:"row",children:(0,m.jsx)("div",{className:"col-md-12",children:(0,m.jsxs)("h1",{className:"text-center bg-light p-2 mb-1",children:["Hello ".concat((null===x||void 0===x?void 0:x.token)&&(null===x||void 0===x||null===(e=x.user)||void 0===e?void 0:e.name)),(0,m.jsx)("p",{className:"text-center",children:null!==u&&void 0!==u&&u.length?"You have ".concat(u.length," items in your cart ").concat(null!==x&&void 0!==x&&x.token?"":"please login to checkout"):"Your Cart is Empty"})]})})}),(0,m.jsx)("div",{className:"container ",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col-md-7 p-0 m-0",children:null===u||void 0===u?void 0:u.map((e=>(0,m.jsxs)("div",{className:"row card flex-row",children:[(0,m.jsx)("div",{className:"col-md-4",children:e._id&&(0,m.jsx)("img",{src:"/api/v1/product/product-photo/".concat(e._id),className:"card-img-top",alt:e.name,width:"100%",height:"130px"})}),(0,m.jsxs)("div",{className:"col-md-4",children:[(0,m.jsx)("p",{children:null===e||void 0===e?void 0:e.name}),(0,m.jsxs)("p",{children:[null===e||void 0===e?void 0:e.description.substring(0,30)," . . ."]}),(0,m.jsxs)("p",{children:["Price : ",null===e||void 0===e?void 0:e.price]})]}),(0,m.jsx)("div",{className:"col-md-4 cart-remove-btn",children:(0,m.jsx)("button",{className:"btn btn-danger",onClick:()=>{(e=>{try{let s=[...u],a=s.findIndex((s=>s._id===e));s.splice(a,1),v(s),localStorage.setItem("cart",JSON.stringify(s))}catch(s){console.log(s)}})(e._id)},children:"Remove"})})]},e._id)))}),(0,m.jsxs)("div",{className:"col-md-5 cart-summary ",children:[(0,m.jsx)("h2",{children:"Cart Summary"}),(0,m.jsx)("p",{children:"Total | Checkout | Payment"}),(0,m.jsx)("hr",{}),(0,m.jsxs)("h4",{children:["Total : \u20b9 ",(()=>{try{let e=0;return null===u||void 0===u||u.map((s=>e+=s.price)),e}catch(e){console.log(e)}})()]}),null!==x&&void 0!==x&&null!==(s=x.user)&&void 0!==s&&s.address?(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("h4",{children:"Current Address"}),(0,m.jsx)("h5",{children:null===x||void 0===x||null===(a=x.user)||void 0===a?void 0:a.address}),(0,m.jsx)("button",{className:"btn btn-outline-warning",onClick:()=>{f("/dashboard/user/profile")},children:"Update Address"})]})}):(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:"mb-3",children:null!==x&&void 0!==x&&x.token?(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("button",{className:"btn btn-outline-warning",onClick:()=>{f("/dashboard/user/profile")},children:"Update Address"})}):(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("button",{className:"btn btn-outline-warning",onClick:()=>{f("/login")},children:"Please Login to checkout"})})})}),(0,m.jsx)("div",{className:"mt-2",children:p&&null!==x&&void 0!==x&&x.token&&null!==u&&void 0!==u&&u.length?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.c,{options:{authorization:p,paypal:{flow:"vault"}},onInstance:e=>{N(e)}}),(0,m.jsx)("button",{className:"btn btn-primary",onClick:async()=>{try{k(!0);const{nonce:e}=await b.requestPaymentMethod(),{data:s}=await i.c.post("/api/v1/product/braintree/payment",{nonce:e,cart:u});k(!1),localStorage.removeItem("cart"),v([]),f("/dashboard/user/orders"),d.cp.success("Payment Completed Successfully")}catch(e){console.log(e),k(!1)}},disabled:y||!b||!(null!==x&&void 0!==x&&null!==(h=x.user)&&void 0!==h&&h.address),children:y?"Processing ....":"Make Payment"})]}):""})]})]})})]})})}}}]);
//# sourceMappingURL=45.60e63f8e.chunk.js.map